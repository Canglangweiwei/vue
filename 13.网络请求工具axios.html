<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>网络请求工具axios</title>
  <script src="./lib/vue.min.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <link rel="stylesheet" href="./css/bootstrap-3.3.7.css">
</head>

<body>
  <div id="app">
    <table class="table table-bordered table-hover table-striped" style="margin:5px;">
      <thead>
        <tr>
          <th>序号</th>
          <th>名称</th>
          <th>时间</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody v-for="(item, index) in list" :key="index">
        <tr>
          <td>{{ item.id }}</td>
          <td>{{ item.name }}</td>
          <td>{{ item.ctime | dateFormat("yyyy-MM-dd hh:MM:ss") }}</td>
          <td>
            <a href="">删除</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <script>
    // 注册全局时间过滤器
    Vue.filter("dateFormat", function (date, pattern = "yyyy-MM-dd hh:MM:ss") {
      var dt = new Date(date);

      // yyyy-MM-dd
      var year = dt.getFullYear();
      var month = dt.getMonth() + 1;
      var day = dt.getDate();

      if (pattern && pattern.toLowerCase() === 'yyyy-mm-dd') {
        return `${year}-${month}-${day}`;
      } else {
        var hours = dt.getHours();
        var munite = dt.getMinutes();
        var seconds = dt.getSeconds();
        return `${year}-${month}-${day} ${hours}:${munite}:${seconds}`;
      }
    })

    var vm = new Vue({
      el: "#app",
      data: {
        list: [
          // {
          //   "id": 82,
          //   "name": "按时是",
          //   "ctime": "2019-03-10T04:31:24.974"
          // },
          // {
          //   "id": 83,
          //   "name": "你好",
          //   "ctime": "2019-03-10T04:33:33.795"
          // },
          // {
          //   "id": 84,
          //   "name": "哈",
          //   "ctime": "2019-03-10T04:33:56.543"
          // },
          // {
          //   "id": 87,
          //   "name": "测试用",
          //   "ctime": "2019-03-10T04:34:06.247"
          // },
          // {
          //   "id": 88,
          //   "name": "不知道",
          //   "ctime": "2019-03-10T04:57:32.968"
          // },
          // {
          //   "id": 89,
          //   "name": "行不行",
          //   "ctime": "2019-03-10T04:57:35.047"
          // },
          // {
          //   "id": 90,
          //   "name": "你猜猜看",
          //   "ctime": "2019-03-10T04:57:38.169"
          // },
          // {
          //   "id": 91,
          //   "name": "哈哈",
          //   "ctime": "2019-03-10T04:57:41.731"
          // },
          // {
          //   "id": 94,
          //   "name": "！！",
          //   "ctime": "2019-03-10T05:56:20.676"
          // },
          // {
          //   "id": 95,
          //   "name": "咋没有动画啊",
          //   "ctime": "2019-03-10T05:56:26.012"
          // },
          // {
          //   "id": 98,
          //   "name": "你等级考试会打瞌睡",
          //   "ctime": "2019-03-10T05:58:07.133"
          // },
          // {
          //   "id": 99,
          //   "name": "福建省分流的",
          //   "ctime": "2019-03-10T05:59:31.938"
          // },
          // {
          //   "id": 102,
          //   "name": "54545135",
          //   "ctime": "2019-03-10T06:01:20.033"
          // },
          // {
          //   "id": 103,
          //   "name": "11212",
          //   "ctime": "2019-03-10T06:01:22.736"
          // },
          // {
          //   "id": 104,
          //   "name": "1514512",
          //   "ctime": "2019-03-10T06:01:24.766"
          // },
          // {
          //   "id": 105,
          //   "name": "4545",
          //   "ctime": "2019-03-10T06:01:26.750"
          // },
          // {
          //   "id": 106,
          //   "name": "5454",
          //   "ctime": "2019-03-10T06:01:28.863"
          // },
          // {
          //   "id": 107,
          //   "name": "手动",
          //   "ctime": "2019-03-10T06:01:53.518"
          // },
          // {
          //   "id": 108,
          //   "name": "撒的按时",
          //   "ctime": "2019-03-10T06:32:04.173"
          // },
          // {
          //   "id": 119,
          //   "name": "test",
          //   "ctime": "2019-03-10T16:35:35.103"
          // },
          // {
          //   "id": 120,
          //   "name": "test1",
          //   "ctime": "2019-03-10T16:58:28.165"
          // },
          // {
          //   "id": 121,
          //   "name": "乌拉",
          //   "ctime": "2019-03-10T18:55:50.679"
          // },
          // {
          //   "id": 122,
          //   "name": "信息",
          //   "ctime": "2019-03-10T18:55:53.045"
          // },
          // {
          //   "id": 123,
          //   "name": "有人吗",
          //   "ctime": "2019-03-10T20:14:28.910"
          // },
          // {
          //   "id": 124,
          //   "name": "过来聊天呀",
          //   "ctime": "2019-03-10T20:14:33.607"
          // },
          // {
          //   "id": 125,
          //   "name": "0.0",
          //   "ctime": "2019-03-10T20:14:36.676"
          // },
          // {
          //   "id": 126,
          //   "name": "= =",
          //   "ctime": "2019-03-10T20:14:50.035"
          // },
          // {
          //   "id": 127,
          //   "name": "不好",
          //   "ctime": "2019-03-10T20:14:52.522"
          // }
        ]
      },
      methods: {

      },
      beforeCreate() {
        axios.get('http://kerys.pythonanywhere.com/api/getprodlist/')
          .then(function (response) {
            console.log(response);
            if (!response) {
              return;
            }
            var result = response.data;
            if (!result) {
              return;
            }
            var mList = result.message;
            if (!mList || mList.length == 0) {
              return;
            }
            this.list = mList;
          })
          .catch(function (error) {
            console.log(error);
          });
      }
    });
  </script>
</body>

</html>